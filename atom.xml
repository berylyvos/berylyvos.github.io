<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN"><title type="text">void kernel</title><subtitle type="html">This is Shigo Gnix's no interest blog.</subtitle><updated>2022-11-25T02:04:50+00:00</updated><id>https://berylyvos.icu/</id><link rel="alternate" type="text/html" href="https://berylyvos.icu/"/><link rel="self" type="application/atom+xml" href="https://berylyvos.icu/atom.xml"/><author><name>berylyvos</name><uri>https://berylyvos.icu/</uri><email>berylyvos@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><generator uri="https://gohugo.io/" version="0.104.3">Hugo</generator><entry><title type="text">ç®€å•åšä¸ªBitTorrentå®¢æˆ·ç«¯</title><link rel="alternate" type="text/html" href="https://berylyvos.icu/posts/gorrent/"/><id>https://berylyvos.icu/posts/gorrent/</id><updated>2022-11-25T02:04:47+00:00</updated><published>2022-11-17T11:15:54+08:00</published><author><name>berylyvos</name><uri>https://berylyvos.icu/</uri><email>berylyvos@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">åŠŸèƒ½ å¤šæ–‡ä»¶torrentä¸‹è½½ æ”¯æŒUDP/HTTP Tracker æ”¯æŒDHTï¼ŒPeXï¼Œç£åŠ›é“¾æ¥ Golâ€¦â€¦</summary><content type="html">&lt;h1 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h1>
&lt;ul>
&lt;li>å¤šæ–‡ä»¶torrentä¸‹è½½&lt;/li>
&lt;li>æ”¯æŒUDP/HTTP Tracker&lt;/li>
&lt;li>&lt;del>æ”¯æŒDHTï¼ŒPeXï¼Œç£åŠ›é“¾æ¥&lt;/del>&lt;/li>
&lt;/ul>
&lt;h1 id="golangå®ç°">Golangå®ç°&lt;/h1>
&lt;h2 id="æ‰¾peers">æ‰¾peers&lt;/h2>
&lt;h3 id="torrentæ–‡ä»¶ç»“æ„ä¸bencodeç¼–ç ">Torrentæ–‡ä»¶ç»“æ„ä¸Bencodeç¼–ç &lt;/h3>
&lt;p>ä¸€ä¸ªtorrentæ–‡ä»¶åŒ…å«ä¸€ä¸ª&lt;strong>æ–‡ä»¶åˆ—è¡¨&lt;/strong>å’Œå…³äºæ‰€æœ‰ç‰‡æ®µçš„&lt;strong>å®Œæ•´æ€§å…ƒæ•°æ®&lt;/strong>(integrity metadata)ï¼Œå¹¶å¯é€‰åœ°åŒ…å«ä¸€ä¸ªå¾ˆé•¿çš„&lt;strong>tracker&lt;/strong>åˆ—è¡¨ï¼Œå¹¶ç”±&lt;strong>Bencode&lt;/strong>ç¼–ç ã€‚&lt;/p>
&lt;p>Bencodeç¼–ç æ”¯æŒ4ç§æ•°æ®ç±»å‹ï¼šbyte stringï¼Œintegerï¼Œlistå’Œdictionaryã€‚&lt;/p>
&lt;p>ä»¥ç”µå½±&lt;a href="https://www.imdb.com/title/tt0088847/">ã€Šæ—©é¤ä¿±ä¹éƒ¨ã€‹&lt;/a>ä¸ºä¾‹ï¼Œå…¶torrentæ–‡ä»¶ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">8&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">announce&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">43&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">udp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//tracker.coppersurfer.tk:6969/announce
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">announce&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l43&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">udp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//tracker.coppersurfer.tk:6969/announcee
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">l49&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">udp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//tracker.leechers-paradise.org:6969/announcee
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">l38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">udp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//tracker.cyberia.is:6969/announcee
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">7&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">comment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">80&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">The&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Breakfast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Club&lt;/span>&lt;span class="mf">.1985&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">REMASTERED&lt;/span>&lt;span class="mf">.720&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">BluRay&lt;/span>&lt;span class="mf">.999&lt;/span>&lt;span class="nx">MB&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HQ&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x265&lt;/span>&lt;span class="mf">.10&lt;/span>&lt;span class="nx">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">GalaxyRG&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">TGx&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">creation&lt;/span> &lt;span class="nx">date&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i1600189812e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">info&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">5&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">6&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">length&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i1035352868e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l79&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">The&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Breakfast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Club&lt;/span>&lt;span class="mf">.1985&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">REMASTERED&lt;/span>&lt;span class="mf">.720&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">BluRay&lt;/span>&lt;span class="mf">.999&lt;/span>&lt;span class="nx">MB&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HQ&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x265&lt;/span>&lt;span class="mf">.10&lt;/span>&lt;span class="nx">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">GalaxyRG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mkve&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">6&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">length&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i678e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l42&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="nx">TGx&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nx">Downloaded&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">torrentgalaxy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">to&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">txte&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">80&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">The&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Breakfast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Club&lt;/span>&lt;span class="mf">.1985&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">REMASTERED&lt;/span>&lt;span class="mf">.720&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">BluRay&lt;/span>&lt;span class="mf">.999&lt;/span>&lt;span class="nx">MB&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HQ&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x265&lt;/span>&lt;span class="mf">.10&lt;/span>&lt;span class="nx">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">GalaxyRG&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">TGx&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">piece&lt;/span> &lt;span class="nx">length&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i524288e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">6&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">pieces&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">39500&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="err">ï¿½ï¿½ï¿½&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="err">&lt;/span>&lt;span class="nx">Ä£&lt;/span>&lt;span class="err">ï¿½&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="err">ï¿½&lt;/span>&lt;span class="nx">É†p&lt;/span>&lt;span class="err">ï¿½&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="err">ï¿½ï¿½&lt;/span>&lt;span class="nx">HH&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="err">ï¿½`&lt;/span>&lt;span class="nx">f&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="err">ï¿½ï¿½ï¿½&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">e&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªå­—å…¸ä¸­ï¼Œæ‰€æœ‰é”®å’Œå­—ç¬¦ä¸²ç±»å‹å€¼çš„ç»“æ„éƒ½æ˜¯&lt;code>length:xxx&lt;/code>ï¼Œæ•´å‹è¡¨ç¤ºä¸º&lt;code>ixxxe&lt;/code>ï¼Œåˆ—è¡¨ä¸º&lt;code>l[]...[]e&lt;/code>ï¼Œå­—å…¸ä¸º&lt;code>d(key:[])...(key:[])e&lt;/code>ï¼Œå…¶ä¸­ï¼Œ&lt;code>[]&lt;/code>å¯ä»¥ä¸ºå››ç§ç±»å‹çš„ä»»æ„ä¸€ç§ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>announce&lt;/code>ï¼štrackerçš„URL&lt;/li>
&lt;li>&lt;code>announce-list&lt;/code>ï¼štrackerçš„URLåˆ—è¡¨ï¼ˆå¯é€‰ï¼‰&lt;/li>
&lt;li>&lt;code>info&lt;/code>ï¼šåŒ…å«æ–‡ä»¶å…±äº«ä¿¡æ¯çš„å­—å…¸
&lt;ul>
&lt;li>&lt;code>files&lt;/code>ï¼šæ–‡ä»¶å­—å…¸åˆ—è¡¨ï¼ˆä»…å½“å…±äº«å¤šä¸ªæ–‡ä»¶æ—¶ï¼‰
&lt;ul>
&lt;li>&lt;code>length&lt;/code>ï¼šæ–‡ä»¶çš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½&lt;/li>
&lt;li>&lt;code>path&lt;/code>ï¼šä¸å­ç›®å½•åç§°å¯¹åº”çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªæ˜¯å®é™…çš„æ–‡ä»¶å&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>name&lt;/code>ï¼šå»ºè®®è¦ä¿å­˜çš„æ–‡ä»¶åï¼ˆå•æ–‡ä»¶ï¼‰/ å»ºè®®çš„ç›®å½•åç§°ï¼ˆå¤šæ–‡ä»¶ï¼‰&lt;/li>
&lt;li>&lt;code>piece length&lt;/code>ï¼šæ–‡ä»¶ç‰‡çš„å¤§å°ï¼Œé€šå¸¸ä¸º256 KB&lt;/li>
&lt;li>&lt;code>pieces&lt;/code>ï¼šæ¯ä¸ªæ–‡ä»¶ç‰‡çš„äºŒè¿›åˆ¶ç¼–ç çš„SHA-1å“ˆå¸Œåˆ—è¡¨ï¼ˆå¦‚æœæœ‰å¤šæ–‡ä»¶ï¼Œåˆ™æŒ‰æ–‡ä»¶å­—å…¸ä¸­çš„é¡ºåºæ‹¼æ¥åœ¨ä¸€èµ·ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ªtorrentæ–‡ä»¶æ˜¯ç”±&lt;strong>infohash&lt;/strong>å”¯ä¸€æ ‡è¯†çš„ï¼Œå…¶å€¼ä¸ºæ•´ä¸ª&lt;code>info&lt;/code>çš„SHA-1å“ˆå¸Œã€‚&lt;/p>
&lt;h3 id="è§£ætorrentæ–‡ä»¶">è§£ætorrentæ–‡ä»¶&lt;/h3>
&lt;p>è§£æbencodeç¼–ç çš„torrentæ–‡ä»¶ï¼Œæœ¬è´¨æ˜¯é€’å½’ä¸‹é™ã€‚å½“ç„¶ï¼ŒMarshal/Unmarshalçš„è¿‡ç¨‹éœ€è¦å€ŸåŠ©goçš„åå°„ã€‚æœ€ç»ˆè§£æå¾—åˆ°ä¸€ä¸ªæ‰å¹³åŒ–çš„ç»“æ„ä½“&lt;code>TorrentFile&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">TorrentFile&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Announce&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AnnounceList&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">InfoSHA&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">ShaLen&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">byte&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FileList&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">File&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FileName&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FileLen&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PieceLen&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PieceSHA&lt;/span> &lt;span class="p">[][&lt;/span>&lt;span class="nx">ShaLen&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">byte&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HasMulti&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä»trackerè·å–peersä¿¡æ¯">ä»trackerè·å–peersä¿¡æ¯&lt;/h3>
&lt;p>æ ¹æ®&lt;code>Announce&lt;/code>ä¸­URLçš„åè®®ç±»å‹ï¼Œå¯å°†trackeråˆ†ä¸ºUDP/HTTP trackerã€‚&lt;/p>
&lt;h4 id="http">HTTP&lt;/h4>
&lt;p>æƒ³è¦å¾—åˆ°peersä¿¡æ¯ï¼Œéœ€è¦ç»™trackerå‘é€ä¸€ä¸ªGETè¯·æ±‚ã€‚å‚æ•°åˆ—è¡¨å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>info_hash&lt;/code>ï¼štorrentæ–‡ä»¶ä¸­&lt;code>info&lt;/code>å­—å…¸ï¼ˆbencodeç¼–ç ï¼‰çš„SHA-1å“ˆå¸Œ&lt;/li>
&lt;li>&lt;code>peer_id&lt;/code>ï¼šå®¢æˆ·ç«¯éšæœºç”Ÿæˆçš„20å­—èŠ‚é•¿åº¦å­—ç¬¦ä¸²&lt;/li>
&lt;li>&lt;code>port&lt;/code>ï¼šå®¢æˆ·ç«¯ç›‘å¬çš„ç«¯å£&lt;/li>
&lt;li>&lt;code>uploaded&lt;/code>ï¼šå½“å‰å·²ä¸Šä¼ é‡&lt;/li>
&lt;li>&lt;code>downloaded&lt;/code>ï¼šå½“å‰å·²ä¸‹è½½é‡&lt;/li>
&lt;li>&lt;code>left&lt;/code>ï¼šå½“å‰å‰©ä½™ä¸‹è½½é‡&lt;/li>
&lt;/ul>
&lt;p>trackeræ”¶åˆ°è¯·æ±‚åè¿”å›ä¸€ä¸ªbencodeç¼–ç çš„å­—å…¸ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">8&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">interval&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i900e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">5&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">peers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">252&lt;/span>&lt;span class="p">:([&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">e&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼Œ&lt;code>interval&lt;/code>è¡¨ç¤ºè¯·æ±‚trackerçš„æ—¶é—´é—´éš”ï¼Œ&lt;code>peers&lt;/code>åŒ…å«äº†peerçš„IPåœ°å€å’Œç«¯å£ä¿¡æ¯ï¼ˆå¤§ç«¯è¡¨ç¤ºï¼‰ï¼Œå…¶å€¼ä¸ºæ¯6å­—èŠ‚ä¸€ç»„çš„äºŒè¿›åˆ¶æ•°æ®ã€‚åŒæ ·ï¼Œéœ€è¦è§£æå¾—åˆ°peerä¿¡æ¯åˆ‡ç‰‡ã€‚&lt;/p>
&lt;h4 id="udp">UDP&lt;/h4>
&lt;p>ä¸ºäº†å‡å°‘HTTPè¯·æ±‚ç»™trackeræœåŠ¡å™¨å¸¦æ¥çš„å¼€é”€ã€æå‡æ€§èƒ½ï¼Œtrackerä¹Ÿæ”¯æŒUDPã€‚&lt;/p>
&lt;p>ä¸HTTPçš„ä¸€æ¬¡è¯·æ±‚å“åº”ä¸åŒï¼Œç”±äºUDPä¸å¯é ï¼Œå®¢æˆ·ç«¯è‡³å°‘éœ€è¦å‘é€ä¸¤ä¸ªUDPæ•°æ®åŒ…ã€‚ä¸ºäº†ä¿è¯å®‰å…¨æ€§ï¼Œtrackeråœ¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¬¬ä¸€ä¸ªåŒ…æ—¶è¿”å›ä¸€ä¸ª&lt;code>connection_id&lt;/code>ï¼Œè®©å®¢æˆ·ç«¯åœ¨ä¸‹ä¸€ä¸ªåŒ…å¸¦ä¸Šè¯¥å‚æ•°ï¼Œtrackeræ”¶åˆ°åæ ¡éªŒã€‚åŒæ—¶ï¼Œ&lt;code>connection_id&lt;/code>ä¸€æ®µæ—¶é—´åä¼šå¤±æ•ˆã€‚&lt;/p>
&lt;h5 id="connect">Connect&lt;/h5>
&lt;p>é¦–å…ˆï¼Œå®¢æˆ·ç«¯å‘é€connectåŒ…ï¼Œå‚æ•°å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>connection_id&lt;/code>ï¼šåˆå§‹å€¼ä¸º0x41727101980ï¼Œç”¨äºæ ‡è¯†åè®®&lt;/li>
&lt;li>&lt;code>action&lt;/code>ï¼š0 è¡¨ç¤ºconnectè¯·æ±‚&lt;/li>
&lt;li>&lt;code>transaction_id&lt;/code>ï¼šéšæœºå€¼ï¼Œ4Bytes&lt;/li>
&lt;/ul>
&lt;p>trackeræœåŠ¡å™¨è¿”å›çš„åŒ…ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>action&lt;/code>ï¼š0 è¡¨ç¤ºconnectè¯·æ±‚ï¼ˆå¦‚æœå‡ºé”™åˆ™ä¸º3ï¼‰&lt;/li>
&lt;li>&lt;code>transaction_id&lt;/code>ï¼šä¸å®¢æˆ·ç«¯è¯·æ±‚å€¼ä¸€è‡´&lt;/li>
&lt;li>&lt;code>connection_id&lt;/code>ï¼šç”±trackerç”Ÿæˆï¼Œç”¨äºæ ‡è¯†å®¢æˆ·ç«¯&lt;/li>
&lt;/ul>
&lt;h5 id="announce">Announce&lt;/h5>
&lt;p>éšåï¼Œå®¢æˆ·ç«¯å‘é€announceåŒ…ï¼Œå‚æ•°å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>connection_id&lt;/code>ï¼štrackerè¿”å›çš„connection_id&lt;/li>
&lt;li>&lt;code>action&lt;/code>ï¼š1 è¡¨ç¤ºannounceè¯·æ±‚&lt;/li>
&lt;li>&lt;code>transaction_id&lt;/code>ï¼šéšæœºå€¼ï¼Œ4Bytes&lt;/li>
&lt;li>&lt;code>event&lt;/code>ï¼šnone = 0 completed = 1 started = 2 stopped = 3&lt;/li>
&lt;li>&lt;code>key&lt;/code>ï¼šéšæœºå€¼ï¼Œ4Bytes&lt;/li>
&lt;li>&lt;code>num_want&lt;/code>ï¼šæƒ³è¦trackerè¿”å›çš„æœ€å¤§peersæ•°é‡ï¼Œ-1ä¸ºé»˜è®¤å€¼&lt;/li>
&lt;/ul>
&lt;p>å‰©ä½™çš„&lt;code>info_hash&lt;/code>ï¼Œ&lt;code>peer_id&lt;/code>è¿™äº›å‚æ•°ä¸HTTPè¯·æ±‚trackeræ—¶ç›¸åŒã€‚
æœ€åï¼ŒtrackeræœåŠ¡å™¨è¿”å›åŒ…å«peersä¿¡æ¯çš„åŒ…ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>action&lt;/code>ï¼š1 è¡¨ç¤ºannounceè¯·æ±‚&lt;/li>
&lt;li>&lt;code>transaction_id&lt;/code>ï¼šä¸å®¢æˆ·ç«¯è¯·æ±‚å€¼ä¸€è‡´&lt;/li>
&lt;li>&lt;code>interval&lt;/code>ï¼šä¸‹ä¸€æ¬¡å®¢æˆ·ç«¯announceçš„æ—¶é—´é—´éš”&lt;/li>
&lt;li>&lt;code>leechers&lt;/code>ï¼šæœªå®Œæˆä¸‹è½½çš„peersæ•°é‡&lt;/li>
&lt;li>&lt;code>seeders&lt;/code>ï¼šå·²ç»å®Œæˆä¸‹è½½ä¸”æ„¿æ„ä¸Šä¼ çš„peersæ•°é‡&lt;/li>
&lt;/ul>
&lt;p>åŒ…çš„æœ€åæ˜¯6å­—èŠ‚ä¸€ç»„çš„peersä¿¡æ¯ã€‚&lt;/p>
&lt;p>å‡ºé”™æ—¶trackerçš„è¿”å›ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>action&lt;/code>ï¼š3 è¡¨ç¤ºerrors&lt;/li>
&lt;li>&lt;code>transaction_id&lt;/code>ï¼šä¸å®¢æˆ·ç«¯è¯·æ±‚å€¼ä¸€è‡´&lt;/li>
&lt;li>&lt;code>error_string&lt;/code>ï¼šæè¿°é”™è¯¯çš„å­—ç¬¦ä¸²&lt;/li>
&lt;/ul>
&lt;h2 id="ä¸‹è½½">ä¸‹è½½&lt;/h2>
&lt;h3 id="tcpè¿æ¥ä¸bittorrentæ¡æ‰‹">TCPè¿æ¥ä¸BitTorrentæ¡æ‰‹&lt;/h3>
&lt;h3 id="ä¸peersäº¤æ¢ä¿¡æ¯">ä¸peersäº¤æ¢ä¿¡æ¯&lt;/h3>
&lt;h3 id="å¹¶å‘æ§åˆ¶">å¹¶å‘æ§åˆ¶&lt;/h3>
&lt;h1 id="å‚è€ƒ">å‚è€ƒ&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="https://www.bittorrent.org/beps/bep_0003.html">BEP-3: The BitTorrent Protocol Specification&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://wiki.theory.org/BitTorrentSpecification">Bittorrent Protocol Specification v1.0&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/archeryue/go-torrent">A toy torrent client written in golang&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.jse.li/posts/torrent">Building a BitTorrent client from the ground up in Go&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://bittorrent.org/beps/bep_0015.html">BEP-15: UDP Tracker Protocol for BitTorrent&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://lifehacker.com/bittorrent-s-future-dht-pex-and-magnet-links-explain-5411311">BitTorrentâ€™s Future: DHT, PEX, and Magnet Links Explained&lt;/a>&lt;/li>
&lt;/ul></content><category scheme="https://berylyvos.icu/categories/%E7%8E%A9/" term="ç©" label="ç©"/><category scheme="https://berylyvos.icu/tags/golang/" term="Golang" label="Golang"/><category scheme="https://berylyvos.icu/tags/bittorrent/" term="BitTorrent" label="BitTorrent"/></entry><entry><title type="text">void kernel</title><link rel="alternate" type="text/html" href="https://berylyvos.icu/posts/hello-world/"/><id>https://berylyvos.icu/posts/hello-world/</id><updated>2022-11-25T02:04:47+00:00</updated><published>2022-11-11T01:38:56+08:00</published><author><name>berylyvos</name><uri>https://berylyvos.icu/</uri><email>berylyvos@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Hello Okay, this is Crazy. void kernel 1 2 3 4 ++++++++++[&amp;gt;+++++++&amp;gt;+++++++++++&amp;gt;+++&amp;lt;&amp;lt;&amp;lt;-] &amp;gt;++++++++.&amp;gt;+.&amp;gt;++.&amp;lt;&amp;lt;-------.&amp;gt;------.+++++ ++++.------.&amp;gt;.&amp;lt;&amp;lt;-.&amp;gt;+++++++++.----------- -------.++++++++.&amp;gt;.&amp;lt;&amp;lt;+++++++.&amp;gt;------.&amp;gt;+. Good -2147483648 AcWing 291. è’™å¾·é‡Œå®‰çš„æ¢¦æƒ³ æ±‚æŠŠ $NÃ—M$ çš„æ£‹ç›˜åˆ†å‰²æˆè‹¥å¹²ä¸ªâ€¦â€¦</summary><content type="html">&lt;h1 id="hello">Hello&lt;/h1>
&lt;hr>
&lt;p>Okay,&lt;br>
this is Crazy.&lt;/p>
&lt;h2 id="void-kernel">void kernel&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-brainfuck" data-lang="brainfuck">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">++++++++++&lt;/span>&lt;span class="k">[&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">+++++++&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">+++++++++++&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">+++&lt;/span>&lt;span class="nv">&amp;lt;&amp;lt;&amp;lt;&lt;/span>&lt;span class="nb">-&lt;/span>&lt;span class="k">]&lt;/span>&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">++++++++&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">+&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">++&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;lt;&amp;lt;&lt;/span>&lt;span class="nb">-------&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">------&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nb">+++++&lt;/span>&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nb">++++&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nb">------&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;lt;&amp;lt;&lt;/span>&lt;span class="nb">-&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">+++++++++&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nb">-----------&lt;/span>&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nb">-------&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nb">++++++++&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;lt;&amp;lt;&lt;/span>&lt;span class="nb">+++++++&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">------&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="nv">&amp;gt;&lt;/span>&lt;span class="nb">+&lt;/span>&lt;span class="nt">.&lt;/span>&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="good">Good&lt;/h2>
&lt;h3 id="-2147483648">-2147483648&lt;/h3>
&lt;h4 id="acwing-291-è’™å¾·é‡Œå®‰çš„æ¢¦æƒ³httpswwwacwingcomactivitycontentproblemcontent1010">&lt;a href="https://www.acwing.com/activity/content/problem/content/1010/">AcWing 291. è’™å¾·é‡Œå®‰çš„æ¢¦æƒ³&lt;/a>&lt;/h4>
&lt;p>æ±‚æŠŠ $NÃ—M$ çš„æ£‹ç›˜åˆ†å‰²æˆè‹¥å¹²ä¸ª $1Ã—2$ çš„é•¿æ–¹å½¢ï¼Œæœ‰å¤šå°‘ç§æ–¹æ¡ˆã€‚&lt;/p>
&lt;p>ä¾‹å¦‚å½“ $N=2ï¼ŒM=4$ æ—¶ï¼Œå…±æœ‰ $5$ ç§æ–¹æ¡ˆã€‚å½“ $N=2ï¼ŒM=3$ æ—¶ï¼Œå…±æœ‰ $3$ ç§æ–¹æ¡ˆã€‚&lt;/p>
&lt;p>&lt;img src="https://berylyvos.icu/img/mondriaan.jpeg" alt="mondriaan">&lt;/p>
&lt;p>æ•°æ®èŒƒå›´ï¼š $1â‰¤N,Mâ‰¤11$&lt;/p>
&lt;p>è¾“å…¥æ ·ä¾‹ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>1 2
1 3
1 4
2 2
2 3
2 4
2 11
4 11
0 0
&lt;/code>&lt;/pre>&lt;p>è¾“å‡ºæ ·ä¾‹ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>1
0
1
2
3
5
144
51205
&lt;/code>&lt;/pre>&lt;p>ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c++" data-lang="c++">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstring&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;vector&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;algorithm&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">M&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">long&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// f[i][j] å‰i-1åˆ—éƒ½æ‘†å¥½ï¼Œä¸”ä»ç¬¬i-1åˆ—ä¼¸å‡ºåˆ°ç¬¬iåˆ—çš„çŠ¶æ€æ˜¯jçš„æ‰€æœ‰æ–¹æ¡ˆæ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">bool&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// æ¯ç§çŠ¶æ€æ˜¯å¦æœ‰è¿ç»­å¥‡æ•°ä¸ªé›¶ï¼Œæœ‰åˆ™çŠ¶æ€æ— æ•ˆä¸ºfalse
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">state&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// state[i][j] çŠ¶æ€içš„å‰ä¸€åˆ—çš„åˆæ³•çŠ¶æ€j
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é¢„å¤„ç†1ï¼šst[]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æšä¸¾æ¯ç§çŠ¶æ€
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">cnt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">bool&lt;/span> &lt;span class="n">isValid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// çŠ¶æ€ i çš„ç¬¬ j+1 ä½ä¸º1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">cnt&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// cntä¸ºå¥‡æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isValid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">++&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">cnt&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">isValid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">st&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">isValid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é¢„å¤„ç†2ï¼šç›¸é‚»ä¸¤åˆ—çš„åˆæ³•çŠ¶æ€ state[][]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">state&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">clear&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// i &amp;amp; j == 0 è¡¨ç¤º ç›¸é‚»ä¸¤åˆ—æ²¡æœ‰é‡åˆéƒ¨åˆ†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// st[i | j] è¡¨ç¤º ä¸¤åˆ—åˆå¹¶åæ²¡æœ‰è¿ç»­å¥‡æ•°ä¸ªé›¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">state&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">push_back&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// dp
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">memset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">sizeof&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="nl">k&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">state&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bye">Bye&lt;/h2>
&lt;p>&lt;img src="https://berylyvos.icu/img/yojouhan_cover.png" alt="yojouhan">&lt;/p></content><category scheme="https://berylyvos.icu/categories/void/" term="void" label="void"/><category scheme="https://berylyvos.icu/tags/c-/" term="C++" label="C++"/><category scheme="https://berylyvos.icu/tags/brainfuck/" term="Brainfuck" label="Brainfuck"/><category scheme="https://berylyvos.icu/tags/%E7%AE%97%E6%B3%95/" term="ç®—æ³•" label="ç®—æ³•"/><category scheme="https://berylyvos.icu/tags/voidkernel/" term="voidkernel" label="voidkernel"/></entry></feed>